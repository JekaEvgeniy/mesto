(()=>{"use strict";var t=document.querySelector("#popup-profile"),e=t.querySelector(".popup__form"),r=t.querySelector(".popup__input_type_name"),n=t.querySelector(".popup__input_type_status"),o=document.querySelector(".profile__button_type_edit"),i="#cards",u=(document.querySelector(i),document.querySelector(".profile__button_type_add")),a=document.querySelector("#popup-newcard").querySelector(".popup__form"),c=document.querySelector("#popup-image"),s=(c.querySelector(".popup-figure__img"),c.querySelector(".popup-figure__figcaption"),document.querySelector(".profile__button_type_avatar")),l="#popup-avatar",p=document.querySelector(l),f=p.querySelector(".popup__form");document.querySelector(l),p.querySelector(".popup__form");const y={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===v(o)?o:String(o)),n)}var o}var _=function(){function t(e){var r=e.nameSelector,n=e.statusSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=document.querySelector(r),this._status=document.querySelector(n),this._avatar=document.querySelector(o)}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,status:this._status.textContent,avatar:this._avatar.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,r=t.status,n=t.avatar;e&&(this._name.textContent=e),r&&(this._status.textContent=r),n&&(this._avatar.src=n)}}])&&m(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===d(o)?o:String(o)),n)}var o}var h=function(){function t(e,r){var n=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=n,this._renderer=o,this._container=document.querySelector(r)}var e,r;return e=t,(r=[{key:"renderItems",value:function(){var t=this;this._items.forEach((function(e){var r=t._renderer(e);t.addItem(r)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&b(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E(n.key),n)}}function w(t,e,r){return(e=E(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E(t){var e=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===S(e)?e:String(e)}var j=function(){function t(e,r,n){var o=this,i=e.name,u=e.link;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,"_removeCard",(function(){o._view.remove()})),w(this,"_likeCard",(function(){o._btnLike.classList.toggle("card__button_active")})),this._name=i,this._link=u,this._container=r,this._handleCardClick=n}var e,r;return e=t,(r=[{key:"_cardTemplate",value:function(){return document.querySelector(this._container).content.querySelector(".card").cloneNode(!0)}},{key:"renderNewCard",value:function(){return this._view=this._cardTemplate(),this._btnLike=this._view.querySelector(".card__button"),this._btnRemove=this._view.querySelector(".card__button-remove"),this._cardImage=this._view.querySelector(".card__image"),this._cardTitle=this._view.querySelector(".card__title"),this._cardTitle.textContent=this._name,this._link?this._cardImage.src=this._link:this._cardImage.src="#",this._cardImage.setAttribute("alt","".concat(this._name)),this._setEventListeners(),this._view}},{key:"_setEventListeners",value:function(){var t=this;this._view.querySelector(".card__button").addEventListener("click",this._likeCard),this._view.querySelector(".card__image").addEventListener("click",(function(){return t._handleCardClick(t._link,t._name)}))}}])&&g(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===k(o)?o:String(o)),n)}var o}var C=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,r;return e=t,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){e.target===e.currentTarget&&t.close()})),this._popup.querySelector(".popup__close").addEventListener("click",(function(e){e.target===e.currentTarget&&t.close()}))}}])&&O(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===P(o)?o:String(o)),n)}var o}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},L.apply(this,arguments)}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(n);if(o){var r=T(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupFigure=e._popup.querySelector(".popup-figure__img"),e._popupImageCaption=e._popup.querySelector(".popup-figure__figcaption"),e}return e=u,(r=[{key:"open",value:function(t,e){t&&this._popupFigure&&(this._popupFigure.src=t),e&&(this._popupFigure&&(this._popupFigure.alt=e),this._popupImageCaption&&(this._popupImageCaption.textContent=e)),L(T(u.prototype),"open",this).call(this)}}])&&q(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(C);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==x(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===x(o)?o:String(o)),n)}var o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},V.apply(this,arguments)}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(n);if(o){var r=M(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,r=t.selector,n=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,r))._form=e._popup.querySelector(".popup__form"),e._handleFormSubmit=n,e._inputs=e._form.querySelectorAll(".popup__input"),e._inputsValuesObj={},e}return e=u,(r=[{key:"_getInputValues",value:function(){var t=this;return this._inputs.forEach((function(e){t._inputsValuesObj[e.name]=e.value})),this._inputsValuesObj}},{key:"close",value:function(){V(M(u.prototype),"close",this).call(this),this._form&&this._form.reset()}},{key:"setEventListeners",value:function(){var t=this;V(M(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}}])&&R(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(C);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z(n.key),n)}}function N(t,e,r){return(e=z(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z(t){var e=function(t,e){if("object"!==U(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===U(e)?e:String(e)}var G=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,"_setEventListeners",(function(){n._inputs.forEach((function(t){t.addEventListener("input",(function(e){n._toggleInputState(t),n._toggleBtnState()}))})),n._toggleBtnState()})),N(this,"_toggleInputState",(function(t){var e=t.validity.valid,r=n._getErrorMessage(t);e?(n._removeStateInputError(t),n._hideMessageInputError(r,t)):(n._addStateInputError(t),n._showMessageInputError(r,t))})),N(this,"_addStateInputError",(function(t){var e=n._classes;t.classList.add(e.inputErrorClass)})),N(this,"_removeStateInputError",(function(t){var e=n._classes;t.classList.remove(e.inputErrorClass)})),N(this,"_showMessageInputError",(function(t,e){var r=n._classes;t&&(t.textContent=e.validationMessage,t.classList.add(r.errorClass))})),N(this,"_hideMessageInputError",(function(t){var e=n._classes;t&&(t.textContent="",t.classList.remove(e.errorClass))})),N(this,"_toggleBtnState",(function(){n._inputs.every((function(t){return t.validity.valid}))?n._enableButton():n._disableButton()})),N(this,"_disableButton",(function(){var t=n._classes;n._btnSubmit.classList.add(t.inactiveButtonClass),n._btnSubmit.disabled=!0})),N(this,"_enableButton",(function(){var t=n._classes;n._btnSubmit.classList.remove(t.inactiveButtonClass),n._btnSubmit.disabled=!1})),this._classes=e,this._form=r,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputs=Array.from(this._form.querySelectorAll(e.inputSelector)),this._btnSubmit=this._form.querySelector(e.submitButtonSelector)}var e,r;return e=t,(r=[{key:"_getErrorMessage",value:function(t){return this._form.querySelector("#".concat(t.id,"-error"))}},{key:"resetValidation",value:function(){var t=this;this._inputs.forEach((function(e){var r=t._getErrorMessage(e);t._removeStateInputError(e),t._hideMessageInputError(r,e)})),this._disableButton()}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&A(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),H=new G(y,e);H.enableValidation();var J=new G(y,a);J.enableValidation();var K=new G(y,f);K.enableValidation();var Q=function(t){return new j(t,"#card",Y).renderNewCard()},W=new h({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(t){return Q(t)}},i);W.renderItems();var X=new B("#popup-image");function Y(t,e){X.open(t,e)}X.setEventListeners();var Z=new D({selector:"#popup-newcard",handleFormSubmit:function(t){W.addItem(Q(t)),Z.close()}});Z.setEventListeners(),u.addEventListener("click",(function(){J.resetValidation(),Z.open()}));var $=new _({nameSelector:".profile__header",statusSelector:".profile__subtitle",avatarSelector:".profile__avatar"}),tt=new D({selector:"#popup-profile",handleFormSubmit:function(t){$.setUserInfo({name:t.name,status:t.status}),tt.close()}});tt.setEventListeners(),o.addEventListener("click",(function(){H.resetValidation(),tt.open();var t=$.getUserInfo(),e=t.name;e&&(r.value=e);var o=t.status;o&&(n.value=o)}));var et=new D({selector:"#popup-avatar",handleFormSubmit:function(t){console.log("========="),console.log(t),console.log("========="),$.setUserInfo({avatar:t.avatar}),et.close()}});et.setEventListeners(),s.addEventListener("click",(function(){K.resetValidation(),et.open()}));var rt=new D({selector:"#popup-question",handleFormSubmit:function(t){console.log("========="),console.log(t),console.log("========="),rt.close()}});rt.setEventListeners(),document.querySelector(".card__button-remove").addEventListener("click",(function(){console.log("click >>>> qustionBtnSelector"),rt.open()}))})();
//# sourceMappingURL=main.js.map